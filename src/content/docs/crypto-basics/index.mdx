---
title: 基礎知識
description: 暗号の基礎知識について知ろう
prev: false
next: false
---

import HashFunctionForm from "src/components/HashFunctionForm.svelte";

# 暗号の基礎知識について知ろう

話している内容を人に知られることなく相手とメッセージをやり取りしたい場面はよくあります。
例えば、個人情報や機密情報を含んだメールを送受信する際に、メールの内容を誰かに盗み見られて情報漏洩してしまうと大変です。
**暗号**を用いることでこのような事態を防ぐことができます。

現代における暗号技術にはどのようなものがあるのか、原理から理解していきましょう。

## 文字コード

---

**文字コード**とは、「A」 「あ」 「漢」といった文字をコンピュータで扱うために、文字に対応する数値をあらかじめ定めたものです。

暗号技術では日本語や英語などで書かれた文章を数値に変換し、その数値に対して数学的な処理を行うことがほとんどです。
文字を数値に変換することを**エンコード**、数値を文字に戻すことを**デコード**ということがあります。

文字コードには様々な種類があります。

### ASCII

**ASCII** は、アルファベット、数字、記号などの文字を、7ビットの数値(0～127 の 128 通り)に対応させたものです。

TODO: 対応表が必要

### Unicode

ASCII はアルファベットや数字、少しの記号にのみ対応しており、最大 128 通りの数値しか扱うことが出来ません。
全世界のあらゆる文字をコンピュータで扱うために、様々な文字コードが提案されています。
そのうちの代表的な規格が**Unicode**です。
UTF-8, UTF-16, UTF-32 などがありますが、ここでは UTF-8 について説明します。

#### UTF-8

UTF-8 では文字に応じて1～4バイトの値に変換します。
ここで、1バイトは8ビット（$0 ～ 2^8-1$ の 256 通り）です。

TODO：UTF-8の例や表など

## 共通鍵暗号と公開鍵暗号

---

暗号の一般的な手順としては、送信者がまず送りたいメッセージである**平文**を**暗号化**し、他人が見ても内容がわからない状態にします。
この暗号化した平文を**暗号文**とよびます。
この暗号文のまま受信者に渡します。
受信者は受け取った暗号文を**復号**して、元の平文と同じメッセージを得ることができます。

暗号化や復号を制御する数値やパラメータのことを**鍵**とよびます。

TODO：暗号化の手順の図

### 共通鍵暗号

**共通鍵暗号**は、暗号化と復号に使うための鍵が同じである暗号方式です。

歴史的に有名な共通鍵暗号として、**シーザー暗号**があります。

> **シーザー暗号**
>
> 平文のアルファベットを決まった文字数だけずらして暗号化し、復号の際には決まった文字数だけ戻して平文を得る暗号です。
>
> 例えば、鍵を $2$ として「Hello」を暗号化すると「Jgnnq」になります。復号時は鍵の $2$ だけアルファベットのずれを戻すと「Hello」となって元の平文を得られます。
> 暗号化と復号に使う鍵が同じですね！

TODO: シーザー暗号の図

鍵をすでに共有していれば問題なく通信できるのですが、どのようにこの鍵を他人に傍受されずに相手と共有すればよいのかという難点があります。

### 公開鍵暗号

**公開鍵暗号**は、暗号化と復号に異なる鍵を使い、暗号化に使う鍵については公開するという暗号方式です。
暗号化に使われる鍵を**公開鍵**、復号に用いる鍵を**秘密鍵**といいます。

受信者の公開鍵は誰でも知ることができ、暗号化は誰でも行うことができます。
復号には受信者だけが持っている秘密鍵を使う必要があり、暗号文を解読できるのは受信者だけです。

公開鍵暗号を用いた通信の手順は、一般に以下の通りです。

1. 受信者は鍵を生成し、公開鍵を公開する。
2. 送信者は受信者の公開鍵を取得し、送りたいメッセージを暗号化して受信者に送信する。
3. 受信者は受け取った暗号文を自らの秘密鍵で復号し、元々のメッセージを得る。

TODO：公開鍵の手順の図

公開鍵暗号は共通鍵暗号に比べて計算のコストが高く、処理速度が遅いのが難点です。

:::tip[公開鍵基盤（PKI）]

公開鍵が本人と結びつけられていることを第三者が保証する仕組みを **公開鍵基盤（PKI）** とよびます。

これによって、例えば攻撃者が作った偽の公開鍵を使って暗号化をして送信し、攻撃者に通信内容を盗み見られるといった問題を防ぐことができます。

:::

### ハイブリッド暗号方式

共通鍵暗号と公開鍵暗号をうまく使うことで、お互いの欠点を補い合うことができます。

この**ハイブリッド暗号方式**は、通信の初回に公開鍵暗号を用いて共通鍵を共有し、それ以降は共有鍵暗号を用いて通信します。
安全に高速で秘匿された通信を行うことができます。

## デジタル署名

---

なりすましを防止し、メッセージが通信の途中で改ざんされていないことを確認できます。

詳しい手順はRSA暗号の署名の章をご覧ください。

### ハッシュ関数

デジタル署名の一部で**ハッシュ関数**を使うのでここで説明します。

ハッシュ関数とは、入力から一定の長さの値を出力する関数で、以下の特徴を持ちます。

- 入力が同じなら常に出力が同じ
- ハッシュ関数の出力（ハッシュ値）から元の入力を推測することが困難
- 出力が同じような入力を複数個挙げることが困難
- 入力が少しでも異なると、出力は全く異なるように見える

ウェブ開発の文脈でもハッシュ関数を使うことがあります。（→[パスワード](./../password#ハッシュ関数とは？)）

### ハッシュ関数の性質を体験してみよう

以下のフォームに適当な文章を入力してみましょう。

ハッシュ関数の性質が成り立っているのかを確認してみてください。

<HashFunctionForm client:load />

## このサイトで紹介する暗号

---

TODO：サイトの概観
